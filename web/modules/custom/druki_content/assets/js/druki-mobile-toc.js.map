{"version":3,"sources":["druki_content/assets/js/druki-mobile-toc.es6.js"],"names":["Drupal","behaviors","drukiContentMobileToc","attach","context","settings","trigger","window","requestIdleCallback","callback","element","querySelector","processed","this","attachEvents","mobileToc","toggleElement","listener","classList","toggle","removeEventListener","addEventListener"],"mappings":"CAQA,SAAWA,GAKTA,EAAOC,UAAUC,sBAAwB,CACvCC,OAAQ,SAAUC,EAASC,GACzB,IAAIC,EAEFA,EADEC,OAAOC,oBACEC,IACTD,oBAAoBC,IAKXA,IACTA,KAIJH,GAAQ,KACN,MAAMI,EAAUN,EAAQO,cAAc,qBAElCD,IAAYA,EAAQE,YACtBF,EAAQE,WAAY,EACpBC,KAAKC,aAAaJ,EAASN,QAKjCU,aAAc,SAAUC,GACtB,MAAMC,EAAgBD,EAAUJ,cAAc,6BAExCM,EAAW,KACfF,EAAUG,UAAUC,OAAO,6BAG7BH,EAAcI,oBAAoB,QAASH,GAC3CD,EAAcK,iBAAiB,QAASJ,KAtC9C,CA0CGjB","file":"druki-mobile-toc.js","sourcesContent":["/**\n * @file\n * Provides mobile contents behaviors.\n *\n * @todo Maybe it's better to created RenderElement + send markup inside\n *   drupalSettings. This will also allows to load JS on specific pages.\n */\n\n(function (Drupal) {\n\n  /**\n   * Attach behavior.\n   */\n  Drupal.behaviors.drukiContentMobileToc = {\n    attach: function (context, settings) {\n      let trigger;\n      if (window.requestIdleCallback) {\n        trigger = (callback) => {\n          requestIdleCallback(callback)\n        }\n      }\n      else {\n        // Fallback for browsers doesn't support IDLE callbacks.\n        trigger = (callback) => {\n          callback()\n        }\n      }\n\n      trigger(() => {\n        const element = context.querySelector('.druki-mobile-toc');\n\n        if (element && !element.processed) {\n          element.processed = true;\n          this.attachEvents(element, context);\n        }\n      });\n    },\n\n    attachEvents: function (mobileToc) {\n      const toggleElement = mobileToc.querySelector('.druki-mobile-toc__toggle');\n\n      const listener = () => {\n        mobileToc.classList.toggle('druki-mobile-toc--active');\n      };\n\n      toggleElement.removeEventListener('click', listener);\n      toggleElement.addEventListener('click', listener);\n    }\n  };\n\n})(Drupal);\n"]}