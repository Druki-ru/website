{"version":3,"sources":["druki/assets/js/dark-mode.es6.js"],"names":["Drupal","behaviors","loremasterDarkMode","attach","context","settings","this","init","querySelectorAll","forEach","item","processed","addEventListener","toggle","isEnabled","enable","localStorage","getItem","document","documentElement","hasAttribute","disable","setAttribute","setItem","removeAttribute","removeItem"],"mappings":"CAKA,SAAWA,GAETA,EAAOC,UAAUC,mBAAqB,CACpCC,OAAQ,SAAUC,EAASC,GAEzBC,KAAKC,OAESH,EAAQI,iBAAiB,0BAE/BC,SAAQC,IACVA,EAAKC,WAITD,EAAKE,iBAAiB,SAAS,KAC7BN,KAAKO,gBAQXN,KAAM,WACCD,KAAKQ,aAIVR,KAAKS,UASPD,UAAW,WACT,OAAOE,aAAaC,QAAQ,0BAA2B,GAMzDJ,OAAQ,WACFK,SAASC,gBAAgBC,aAAa,cACxCd,KAAKe,UAGLf,KAAKS,UAOTA,OAAQ,WACNG,SAASC,gBAAgBG,aAAa,aAAc,QACpDN,aAAaO,QAAQ,wBAAwB,IAM/CF,QAAS,WACPH,SAASC,gBAAgBK,gBAAgB,cACzCR,aAAaS,WAAW,0BAlE9B,CAsEGzB","file":"dark-mode.js","sourcesContent":["/**\n * @file\n * Dark mode switcher.\n */\n\n(function (Drupal) {\n\n  Drupal.behaviors.loremasterDarkMode = {\n    attach: function (context, settings) {\n      // Force init to fast change after page loads.\n      this.init();\n\n      let toggles = context.querySelectorAll('.js-dark-mode-switcher');\n\n      toggles.forEach(item => {\n        if (item.processed) {\n          return;\n        }\n\n        item.addEventListener('click', () => {\n          this.toggle();\n        });\n      });\n    },\n\n    /**\n     * Init script for dark mode.\n     */\n    init: function () {\n      if (!this.isEnabled()) {\n        return;\n      }\n\n      this.enable();\n    },\n\n    /**\n     * Gets status for dark mode.\n     *\n     * @return boolean\n     *   TRUE if dark mode is active, FALSE otherwise.\n     */\n    isEnabled: function () {\n      return localStorage.getItem('loremaster-dark-mode') || false;\n    },\n\n    /**\n     * Toggle dark mode.\n     */\n    toggle: function () {\n      if (document.documentElement.hasAttribute('data-theme')) {\n        this.disable();\n      }\n      else {\n        this.enable();\n      }\n    },\n\n    /**\n     * Activates dark mode.\n     */\n    enable: function () {\n      document.documentElement.setAttribute('data-theme', 'dark');\n      localStorage.setItem('loremaster-dark-mode', true);\n    },\n\n    /**\n     * Disable dark mode.\n     */\n    disable: function () {\n      document.documentElement.removeAttribute('data-theme');\n      localStorage.removeItem('loremaster-dark-mode');\n    },\n  };\n\n})(Drupal);\n"]}