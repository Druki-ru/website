{"version":3,"sources":["code-highlight.es6.js"],"names":["Drupal","behaviors","loremasterCodeHighlight","attach","context","settings","window","IntersectionObserver","trigger","requestIdleCallback","callback","intersectionObserver","entries","forEach","entry","isIntersecting","codeBlock","target","Prism","highlightElement","unobserve","slice","call","document","querySelectorAll","processed","observe"],"mappings":"CAKA,SAAWA,GAQTA,EAAOC,UAAUC,wBAA0B,CACzCC,OAAQ,SAAUC,EAASC,GACzB,IAAKC,OAAOC,qBACV,OAGF,IAAIC,EAEFA,EADEF,OAAOG,oBACEC,IACTD,oBAAoBC,IAKXA,IACTA,KAIJF,GAAQ,KACN,MAAMG,EAAuB,IAAIJ,sBAAqB,SAAUK,GAC9DA,EAAQC,SAAQ,SAAUC,GACxB,GAAIA,EAAMC,eAAgB,CACxB,IAAIC,EAAYF,EAAMG,OACtBC,MAAMC,iBAAiBH,GACvBL,EAAqBS,UAAUJ,UAKrC,GAAGK,MAAMC,KAAKC,SAASC,iBAAiB,aAAaX,SAAQ,SAAUG,GACjEA,EAAUS,YAGdT,EAAUS,WAAY,EACtBd,EAAqBe,QAAQV,YA3CvC,CAiDGhB","file":"code-highlight.js","sourcesContent":["/**\n * @file\n * code-highlight.js behaviors.\n */\n\n(function (Drupal) {\n\n  /**\n   * Highlight the code blocks.\n   *\n   * We highlight only visible code blocks on the page to increase performance\n   * for mobile devices on pages where a lot of code needs to be highlighted.\n   */\n  Drupal.behaviors.loremasterCodeHighlight = {\n    attach: function (context, settings) {\n      if (!window.IntersectionObserver) {\n        return;\n      }\n\n      let trigger;\n      if (window.requestIdleCallback) {\n        trigger = (callback) => {\n          requestIdleCallback(callback)\n        }\n      }\n      else {\n        // Fallback for browsers doesn't support IDLE callbacks.\n        trigger = (callback) => {\n          callback()\n        }\n      }\n\n      trigger(() => {\n        const intersectionObserver = new IntersectionObserver(function (entries) {\n          entries.forEach(function (entry) {\n            if (entry.isIntersecting) {\n              let codeBlock = entry.target;\n              Prism.highlightElement(codeBlock);\n              intersectionObserver.unobserve(codeBlock);\n            }\n          });\n        });\n\n        [].slice.call(document.querySelectorAll('pre code')).forEach(function (codeBlock) {\n          if (codeBlock.processed) {\n            return;\n          }\n          codeBlock.processed = true;\n          intersectionObserver.observe(codeBlock);\n        });\n      });\n    }\n  };\n\n})(Drupal);\n"]}